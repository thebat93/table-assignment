# Клиентское приложение

## Быстрый старт в режиме разработки

> npm i
> npm run dev

Приложение запустится на http://localhost:5173

## Зависимости

В приложении используются:
1. vite
2. react
3. openapi-generator-cli - для генерации кода из схемы OpenAPI
4. axios
5. @tanstack/react-query
6. @hello-pangea/dnd - для работы с Drag and Drop
7. react-icons - набор иконок
8. @uidotdev/usehooks - набор полезных хуков
9. clsx - как classnames, только меньше
10. lodash.debounce
11. react-router

## Скрипты

1. dev - запуск дев сервера
2. lint - линтинг JS файлов
3. lint:styles - линтинг CSS файлов
4. generate-dto - генерация файлов из OpenAPI
5. typecheck - проверка типов

## Фичи приложения

1. Генерация API и моделей из схемы OpenAPI
2. Серверная пагинация - `/server-pagination`
3. Клиентская пагинация - `/client-pagination`
4. Сортировка по выбранной колонке (по возрастанию/убыванию)
5. Изменение порядка колонок с помощью Drag and Drop
6. Поиск и фильтрация данных
7. Запись состояния пагинации/поиска/фильтрации в URL
8. Запись порядка колонок в Local Storage
9. Компоненты и хуки для отображения таблицы
10. Компонент для диалога

## Структура папок

`/src/api`: все что относится к API клиента
`/src/api/generated`: API и сгенерированные модели из схемы OpenAPI
`/src/api/licenses`: все что относится к сущности License: константы, типы, хуки, утилиты
`/src/api/index.ts`: API клиента для всех сущностей

`/src/components`: компоненты, которые являются общими для всего приложения (подходят для переноса в отдельную библиотеку)
`/src/components/Button`: кнопка
`/src/components/Dialog`: диалог
`/src/components/Dropdown`: дропдаун
`/src/components/Filters`: фильтры (поиск, селект, ввод даты)
`/src/components/Table`: таблица

`/src/hooks`: хуки, которые являются общими для всего приложения (подходят для переноса в отдельную библиотеку)

`/src/pages`: страницы приложения
`/src/pages/ClientPagination`: пример клиентской пагинации
`/src/pages/ServerPagination`: пример серверной пагинации
`/src/pages/shared`: общие компоненты для страниц (не подходят для переноса в отдельную библиотеку)

## Особенности реализации

Реализация вдохновлена библиотекой [@tanstack/react-table](https://tanstack.com/table).
Используемый подход: API таблицы с помощью хука `useTable` и compound components для того чтобы упростить построение кастомной таблицы.

Хук `useTable` использует в себе другие хуки для реализации отдельных функций таблицы:
`useColumnsOrder` - порядок колонок (добавление, удаление, изменение порядка, сохранение в Local Storage)
`useSelection` - выбор строк (добавление, удаление, выбор всех)
`usePagination` - пагинация (текущая страница, переход на следующую/предыдущую, полное количество страниц)
`useSorting` - сортировка (поле сортировки, направление)

Для создания кастомной таблицы из компонентов нужно использовать их в иерархии:
`Table` - обертка таблицы
`Table.Header` - хедер
`Table.HeaderCell` - ячейка хедера
`Table.Row` - строка
`Table.RowCell` - ячейка строки

`TableFooter` - обертка футера
`TableFooter.SelectionStatus` - статистика по выбору строк
`TableFooter.PaginationButton` - кнопка пагинации

Компонент диалогового окна использует нативный браузерный элемент <dialog>

Для работы с URL-параметрами используется хук `useQueryParams`
